<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0d14">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ðŸŽµ Music Venue - System ZarzÄ…dzania</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/app/styles.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽµ</text></svg>">
</head>
<body>
    <div id="app">
        <!-- Login Screen -->
        <div id="login-screen" class="screen active">
            <div class="login-container">
                <div class="login-header">
                    <div class="logo">ðŸŽµ</div>
                    <h1>Music Venue</h1>
                    <p>System ZarzÄ…dzania Klubem</p>
                </div>
                <form id="login-form" class="login-form">
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" placeholder="twoj@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">HasÅ‚o</label>
                        <input type="password" id="login-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <span>Zaloguj siÄ™</span>
                    </button>
                </form>
                <div id="login-error" class="error-message"></div>
            </div>
        </div>

        <!-- Main App -->
        <div id="main-app" class="screen">
            <!-- Header -->
            <header class="app-header">
                <div class="header-left">
                    <button id="menu-toggle" class="menu-btn">â˜°</button>
                    <h1 class="app-title">ðŸŽµ Music Venue</h1>
                </div>
                <div class="header-right">
                    <button id="sound-toggle" class="chat-btn" onclick="toggleSoundNotifications()" title="Powiadomienia dÅºwiÄ™kowe">
                        ðŸ””
                    </button>
                    <button id="pm-toggle" class="chat-btn" onclick="showPrivateMessagesPanel()" title="Prywatne wiadomoÅ›ci" style="position: relative;">
                        ðŸ“©
                        <span id="private-badge" class="badge hidden">0</span>
                    </button>
                    <button id="chat-toggle" class="chat-btn" title="Czat zespoÅ‚u">
                        ðŸ’¬
                        <span id="chat-badge" class="badge hidden">0</span>
                    </button>
                    <div class="user-info">
                        <span id="user-name">UÅ¼ytkownik</span>
                        <button id="logout-btn" class="btn btn-small">Wyloguj</button>
                    </div>
                </div>
            </header>

            <!-- Sidebar -->
            <nav id="sidebar" class="sidebar">
                <div class="sidebar-header">
                    <span id="user-role-badge" class="role-badge">Pracownik</span>
                </div>
                <ul class="nav-menu">
                    <li><a href="#" data-view="dashboard" class="nav-item active">ðŸ“Š Dashboard</a></li>
                    <li><a href="#" data-view="calendar" class="nav-item">ðŸ“… Kalendarz</a></li>
                    <li><a href="#" data-view="events" class="nav-item">ðŸŽª Eventy</a></li>
                    <li><a href="#" data-view="costs" class="nav-item">ðŸ’¸ Koszty</a></li>
                    <li><a href="#" data-view="revenue" class="nav-item">ðŸ’° Przychody</a></li>
                    <li><a href="#" data-view="receipts" class="nav-item">ðŸ§¾ Paragony</a></li>
                    <li><a href="#" data-view="reports" class="nav-item">ðŸ“ˆ Raporty</a></li>
                    <li id="positions-nav" class="hidden"><a href="#" data-view="positions" class="nav-item">ðŸŽ­ Stanowiska</a></li>
                    <li id="users-nav" class="hidden"><a href="#" data-view="users" class="nav-item">ðŸ‘¥ UÅ¼ytkownicy</a></li>
                </ul>
            </nav>

            <!-- Main Content -->
            <main id="main-content" class="main-content">
                <!-- Dashboard View -->
                <div id="dashboard-view" class="view active">
                    <div class="view-header">
                        <h2>ðŸ“Š Dashboard</h2>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">ðŸŽª</div>
                            <div class="stat-info">
                                <span class="stat-value" id="total-events">0</span>
                                <span class="stat-label">Eventy</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ðŸ’¸</div>
                            <div class="stat-info">
                                <span class="stat-value" id="total-costs">0 zÅ‚</span>
                                <span class="stat-label">Koszty</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ðŸ’°</div>
                            <div class="stat-info">
                                <span class="stat-value" id="total-revenue">0 zÅ‚</span>
                                <span class="stat-label">Przychody</span>
                            </div>
                        </div>
                        <div class="stat-card profit">
                            <div class="stat-icon">ðŸ“ˆ</div>
                            <div class="stat-info">
                                <span class="stat-value" id="total-profit">0 zÅ‚</span>
                                <span class="stat-label">Zysk netto</span>
                            </div>
                        </div>
                    </div>
                    <div class="recent-section">
                        <h3>NajbliÅ¼sze eventy</h3>
                        <div id="recent-events" class="card-list"></div>
                    </div>
                </div>

                <!-- Calendar View -->
                <div id="calendar-view" class="view">
                    <div class="view-header">
                        <h2>ðŸ“… Kalendarz eventÃ³w</h2>
                        <div class="calendar-nav">
                            <button class="btn btn-small" onclick="changeMonth(-1)">â—€ Poprzedni</button>
                            <span id="calendar-month-label" class="calendar-month-label">Luty 2026</span>
                            <button class="btn btn-small" onclick="changeMonth(1)">NastÄ™pny â–¶</button>
                        </div>
                    </div>
                    <div id="calendar-grid" class="calendar-grid"></div>
                    <div id="calendar-events" class="calendar-events">
                        <h3>Eventy w wybranym dniu</h3>
                        <div id="day-events-list" class="card-list"></div>
                    </div>
                </div>

                <!-- Events View -->
                <div id="events-view" class="view">
                    <div class="view-header">
                        <h2>ðŸŽª Eventy</h2>
                        <button id="add-event-btn" class="btn btn-primary">+ Dodaj event</button>
                    </div>
                    <div id="events-list" class="card-list"></div>
                </div>

                <!-- Costs View -->
                <div id="costs-view" class="view">
                    <div class="view-header">
                        <h2>ðŸ’¸ Koszty</h2>
                        <button id="add-cost-btn" class="btn btn-primary">+ Dodaj</button>
                    </div>
                    <div class="filter-bar">
                        <select id="cost-event-filter" class="form-select">
                            <option value="">Wszystkie eventy</option>
                        </select>
                    </div>
                    <div id="costs-list" class="card-list"></div>
                </div>

                <!-- Revenue View -->
                <div id="revenue-view" class="view">
                    <div class="view-header">
                        <h2>ðŸ’° Przychody</h2>
                        <button id="add-revenue-btn" class="btn btn-primary">+ Dodaj</button>
                    </div>
                    <div class="filter-bar">
                        <select id="revenue-event-filter" class="form-select">
                            <option value="">Wszystkie eventy</option>
                        </select>
                    </div>
                    <div id="revenue-list" class="card-list"></div>
                </div>

                <!-- Receipts View -->
                <div id="receipts-view" class="view">
                    <div class="view-header">
                        <h2>ðŸ§¾ Paragony</h2>
                        <button id="add-receipt-btn" class="btn btn-primary">+ Dodaj paragon</button>
                    </div>
                    <div id="receipts-list" class="card-list"></div>
                </div>

                <!-- Reports View -->
                <div id="reports-view" class="view">
                    <div class="view-header">
                        <h2>ðŸ“ˆ Raporty</h2>
                    </div>
                    <div class="report-filters">
                        <div class="form-group">
                            <label>Wybierz event</label>
                            <select id="report-event-select" class="form-select">
                                <option value="">Wybierz...</option>
                            </select>
                        </div>
                    </div>
                    <div id="report-content" class="report-content"></div>
                </div>

                <!-- Positions View -->
                <div id="positions-view" class="view">
                    <div class="view-header">
                        <h2>ðŸŽ­ ZarzÄ…dzanie stanowiskami</h2>
                        <button id="add-position-btn" class="btn btn-primary" onclick="addPosition()">+ Dodaj stanowisko</button>
                    </div>
                    <div class="users-info-box">
                        <p>ðŸ’¡ <strong>Info:</strong> Stanowiska moÅ¼na przypisywaÄ‡ uÅ¼ytkownikom. WÅ‚aÅ›ciciel i manager mogÄ… dodawaÄ‡ nowe stanowiska oraz je usuwaÄ‡.</p>
                    </div>
                    <div id="positions-list" class="card-list"></div>
                </div>

                <!-- Users View -->
                <div id="users-view" class="view">
                    <div class="view-header">
                        <h2>ðŸ‘¥ ZarzÄ…dzanie uÅ¼ytkownikami</h2>
                        <button id="add-user-btn" class="btn btn-primary">+ Dodaj uÅ¼ytkownika</button>
                    </div>
                    <div class="users-info-box">
                        <p>ðŸ’¡ <strong>Uprawnienia:</strong> WÅ‚aÅ›ciciel moÅ¼e zarzÄ…dzaÄ‡ wszystkimi uÅ¼ytkownikami. Manager moÅ¼e dodawaÄ‡ i edytowaÄ‡ tylko pracownikÃ³w.</p>
                    </div>
                    <div id="users-list" class="card-list"></div>
                </div>
            </main>

            <!-- Chat Panel -->
            <aside id="chat-panel" class="chat-panel">
                <div class="chat-header">
                    <h3>ðŸ’¬ Czat zespoÅ‚u</h3>
                    <button id="chat-close" class="chat-close">âœ•</button>
                </div>
                <div class="chat-users">
                    <div class="users-header">
                        <span>Online</span>
                        <span id="online-count" class="online-count">0</span>
                    </div>
                    <div id="users-online" class="users-list"></div>
                </div>
                <div id="chat-messages" class="chat-messages"></div>
                <div id="typing-indicator" class="typing-indicator hidden">
                    <span id="typing-user"></span> pisze...
                </div>
                <form id="chat-form" class="chat-input">
                    <input type="text" id="chat-input" placeholder="Napisz wiadomoÅ›Ä‡..." maxlength="2000" autocomplete="off">
                    <button type="submit" class="btn btn-primary">âž¤</button>
                </form>
            </aside>
        </div>

        <!-- Modal -->
        <div id="modal" class="modal">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3 id="modal-title">TytuÅ‚</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div id="modal-body" class="modal-body"></div>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div id="toast-container" class="toast-container"></div>
    </div>

    <script src="/app/config.js"></script>
    <script src="/app/app.js"></script>
</body>
</html>
